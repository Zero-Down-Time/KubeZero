global:
  defaultDestination:
    server: https://kubernetes.default.svc

  # This repoURL is used a base for all the repoURLs applications
  # Setting this to a eg. private git repo incl. the use of pathPrefix allows kubezero to be
  # integrated into any repository as a git subtree if for example public internet access is unavailable
  defaultSource:
    # defaultSource.repoURL -- default repository for argocd applications
    repoURL: https://github.com/zero-down-time/kubezero
    # defaultSource.targetRevision -- default tracking of repoURL
    targetRevision: HEAD
    # defaultSource.pathPrefix -- optional path prefix within repoURL to support eg. remote subtrees
    pathPrefix: ''

# kubezero -- Kubezero configuration, values.yaml please see kubezeroApp
kubezero: {}

argo-cd:
  installCRDs: false

  #configs:
  #  secret:
  #    argocdServerAdminPassword: "$2a$10$ivKzaXVxMqdeDSfS3nqi1Od3iDbnL7oXrixzDfZFRHlXHnAG6LydG"
  #    argocdServerAdminPasswordMtime: "2020-04-24T15:33:09BST"

  # Run Argo on the controllers
  controller:
    nodeSelector:
      node-role.kubernetes.io/master: ""
    tolerations:
    - key: node-role.kubernetes.io/master
      effect: NoSchedule

  repoServer:
    nodeSelector:
      node-role.kubernetes.io/master: ""
    tolerations:
    - key: node-role.kubernetes.io/master
      effect: NoSchedule

  server:
    config:
      # argo-cd.server.config.url -- ArgoCD hostname to be exposed via Istio
      url: argocd.example.com

    # Rename former https port to grpc, works with istio + insecure
    service:
      servicePortHttpsName: grpc

    extraArgs:
    - --insecure
    nodeSelector:
      node-role.kubernetes.io/master: ""
    tolerations:
    - key: node-role.kubernetes.io/master
      effect: NoSchedule

  redis:
    nodeSelector:
      node-role.kubernetes.io/master: ""
    tolerations:
    - key: node-role.kubernetes.io/master
      effect: NoSchedule

  dex:
    enabled: false

istio:
  # istio.enabled -- Deploy Istio VirtualService to expose ArgoCD
  enabled: false
  # istio.gateway -- Name of the Istio gateway to add the VirtualService to
  gateway: ingressgateway.istio-system.svc.cluster.local
