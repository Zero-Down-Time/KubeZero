diff '--color=auto' -tuNr charts/gitea.orig/templates/gitea/config.yaml charts/gitea/templates/gitea/config.yaml
--- charts/gitea.orig/templates/gitea/config.yaml	2025-09-30 11:30:44.708571282 +0000
+++ charts/gitea/templates/gitea/config.yaml	2025-09-30 11:30:44.718571344 +0000
@@ -17,15 +17,16 @@
   labels:
     {{- include "gitea.labels" . | nindent 4 }}
 type: Opaque
+data:
+{{ (.Files.Glob "scripts/init-containers/config/*.sh").AsSecrets | indent 2 }}
 stringData:
-{{ (.Files.Glob "scripts/init-containers/config/*.sh").AsConfig | indent 2 }}
   assertions: |
 
     {{- /*assert that only one PG dep is enabled */ -}}
     {{- if and (.Values.postgresql.enabled) (index .Values "postgresql-ha" "enabled") -}}
       {{- fail "Only one of postgresql or postgresql-ha can be enabled at the same time." -}}
     {{- end }}
-    
+
     {{- /* multiple replicas assertions */ -}}
     {{- if gt (.Values.replicaCount | int) 1 -}}
       {{- if .Values.gitea.config.cron -}}
@@ -35,7 +36,7 @@
           {{- end }}
         {{- end }}
       {{- end }}
-    
+
       {{- if eq (first .Values.persistence.accessModes) "ReadWriteOnce" -}}
         {{- fail "When using multiple replicas, a RWX file system is required and persistence.accessModes[0] must be set to ReadWriteMany." -}}
       {{- end }}
@@ -53,5 +54,5 @@
           {{- end }}
         {{- end }}
       {{- end }}
-      
+
     {{- end }}
diff '--color=auto' -tuNr charts/gitea.orig/templates/gitea/init.yaml charts/gitea/templates/gitea/init.yaml
--- charts/gitea.orig/templates/gitea/init.yaml	2025-09-30 11:30:44.708571282 +0000
+++ charts/gitea/templates/gitea/init.yaml	2025-09-30 11:31:03.772023135 +0000
@@ -6,8 +6,9 @@
   labels:
     {{- include "gitea.labels" . | nindent 4 }}
 type: Opaque
+data:
+{{ (.Files.Glob "scripts/init-containers/init/*.sh").AsSecrets | indent 2 }}
 stringData:
-{{ (.Files.Glob "scripts/init-containers/init/*.sh").AsConfig | indent 2 }}
   init_directory_structure.sh: |-
     #!/usr/bin/env bash
 
@@ -61,7 +62,7 @@
     function test_valkey_connection() {
       local RETRY=0
       local MAX=30
-      
+
       echo 'Wait for valkey to become avialable...'
       until [ "${RETRY}" -ge "${MAX}" ]; do
         nc -vz -w2 {{ include "valkey.servicename" . }} {{ include "valkey.port" . }} && break
@@ -77,7 +78,7 @@
 
     test_valkey_connection
     {{- end }}
-    
+
 
     {{- if or .Values.gitea.admin.existingSecret (and .Values.gitea.admin.username .Values.gitea.admin.password) }}
     function configure_admin_user() {
@@ -225,4 +226,4 @@
 
     configure_oauth
 
-    echo '==== END GITEA CONFIGURATION ===='
\ No newline at end of file
+    echo '==== END GITEA CONFIGURATION ===='
